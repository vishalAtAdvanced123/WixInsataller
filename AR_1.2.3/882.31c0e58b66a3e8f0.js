"use strict";(self.webpackChunkeSolve_project=self.webpackChunkeSolve_project||[]).push([[882],{73882:(Ot,O,c)=>{c.r(O),c.d(O,{DashboardModule:()=>Pt,MY_FORMATS:()=>H});var D=c(36362),A=c(89143),w=c(62591),B=c(74903),C=c(13736),R=c(1901),j=c(42919),x=c(50253),d=c(56908),Q=c(75725),p=c(68951),S=c(62730),U=c(96893),L=c(68264),e=c(3184),z=c(61891),V=c(87317),F=c(65590),Y=c(31959);class G{constructor(s,t,o,i,n,r,l){this.jobID=s,this.jobStartDate=t,this.jobEndDate=o,this.jobName=i,this.subGroupName=n,this.isMultiday=r,this.canTradeJob=l}}class ${constructor(s,t,o,i,n){this.absenceID=s,this.absenceStartDate=t,this.absenceEndDate=o,this.absenceCodeName=i,this.absenceCodeColor=n}}var I=c(21164),E=c(19407),W=c(10502),y=c(12379),K=c(27923);let X=(()=>{class a{constructor(t,o){this._dashboardService=t,this._messageService=o,this.myScheduleData=[],this._completed=new x.x,this._rowCounter=0,this._listOfDaysInHeader=[],this.currentTab="",this.numberOfDisplayedColumns=0}ngOnInit(){this.periodChanged(this._dashboardService.getCurrentPeriod()),this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t)),this._dashboardService.getTabChangedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.currentTab=t,this.periodChanged(this._dashboardService.getCurrentPeriod())}),this.onJobTraded.pipe((0,p.R)(this._completed)).subscribe(()=>{this.periodChanged(this._dashboardService.getCurrentPeriod())})}periodChanged(t){("My Schedule"==this.currentTab||""==this.currentTab)&&(this._periodInformation=t,this._dashboardService.getEmployeeDashboardDataForMySchedule(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).subscribe(o=>{this.myScheduleData=o.Jobs,this.populateData()},o=>{this._messageService.open(o)}))}populateData(){const t=this._periodInformation.startDate,o=this._periodInformation.endDate,i=document.getElementById("empl_dashboard_my_schedule_table");this.setBodyOfTable(i,this.myScheduleData,this.setHeadOfTable(t,o,i))}setHeadOfTable(t,o,i){this._listOfDaysInHeader=[],this._rowCounter=0,i.textContent=null;let n=t;const r=document.createElement("thead"),l=document.createElement("tr");let m=0;do{const u=document.createElement("th");u.textContent=d(n).format("ddd D MMM"),this._listOfDaysInHeader.push(d(n)),u.setAttribute("scope","col"),u.setAttribute("id","col"+m),u.setAttribute("class","empl-dashboard-my-schedule-table-header"),l.appendChild(u),n=d(n).clone().add(1,"day"),m++}while(d(n).isSameOrBefore(d(o)));return r.appendChild(l),l.setAttribute("class","w-100 text-center"),i.appendChild(r),m}setBodyOfTable(t,o,i){this.numberOfDisplayedColumns=i;const n=document.createElement("tbody");n.setAttribute("id","myScheduleTableBody"),t.appendChild(n),o.forEach(r=>{0==this._rowCounter&&this.addNewRowInBody(n,i,this._rowCounter),this.checkIfThereIsEnoughSpaceInTheExistingRows(r)||(this.addNewRowInBody(n,i,this._rowCounter),this.checkIfThereIsEnoughSpaceInTheExistingRows(r))}),o.forEach(r=>{const l=document.getElementsByClassName(r.endDateTime);if(l.length>=2)for(let m=1;m<l.length-1;m++)l[m].innerHTML=""})}addNewRowInBody(t,o,i){const n=document.createElement("tr");n.setAttribute("id","row"+i);for(let r=0;r<o;r++){const l=document.createElement("td");l.setAttribute("id","row"+i+"col"+r),l.style.padding="0px",l.setAttribute("class","empl-dashboard-my-schedule-table-row"),n.appendChild(l)}this._rowCounter++,t.appendChild(n)}checkIfThereIsEnoughSpaceInTheExistingRows(t){const o=document.getElementById("myScheduleTableBody").getElementsByTagName("tr");let i=!1;for(let n=0;n<o.length;n++){const r=Object.assign({},t);for(let l=0;l<this._listOfDaysInHeader.length;l++){let m=!1;if(d(r.startDateTime).clone().isBefore(d(this._listOfDaysInHeader[l]).clone(),"date")){const u=d(r.startDateTime).clone().format("hh:mma");r.startDateTime=d(this._periodInformation.startDate).clone(),r.startDateTime.set({hour:u.split(":")[0],minute:u.split(":")[1],second:0,millisecond:0}),m=!0}if(d(this._listOfDaysInHeader[l]).clone().isSame(d(r.startDateTime).clone(),"date")){const u=document.getElementById("row"+n+"col"+l);if(u.getElementsByTagName("div").length)break;if(d(r.startDateTime).clone().isSame(d(r.endDateTime).clone(),"date"))m?this.addContentToCell(u,!1,r,"fakeFirstLast"):this.addContentToCell(u,!1,r);else{if(i=!1,"00:00:00"==(0,K.gr)(r.endDateTime)){if(1==d(r.endDateTime).diff(d(r.startDateTime),"days"))return m?this.addContentToCell(u,!1,r,"fakeFirstLast"):this.addContentToCell(u,!1,r),!0;i=!0}let _=d(r.startDateTime).clone(),f=0;for(;d(_).isSameOrBefore(d(r.endDateTime).clone(),"date");)f++,_=_.clone().add(1,"day");i&&f--;for(let b=l;b<l+f;b++){const g=document.getElementById("row"+n+"col"+b);try{if(g.getElementsByTagName("div").length)return!1}catch(M){}}for(let b=l;b<l+f;b++){const g=document.getElementById("row"+n+"col"+b);g&&this.addContentToCell(g,!0,r,b==l?m?"fakeFirst":"first":b==l+f-1?"last":"middle")}}return!0}}}return!1}addContentToCell(t,o,i,n){const r=document.createElement("div");let l=!1,m=!1;r.style.width="100%",r.style.minWidth="110px",r.style.height="30px",r.style.marginBottom="5px",r.style.backgroundColor=i.primaryColor,r.classList.add(""+i.endDateTime),!o&&"fakeFirst"!=n&&"fakeFirstLast"!=n&&(r.style.borderRadius="5px",l=!0),o&&"first"==n?(d(i.startDateTime).clone().isSame(this._periodInformation.endDate,"days")&&(m=!0),r.style.borderRadius="5px",r.style.borderTopRightRadius="0px",r.style.borderBottomRightRadius="0px",t.style.borderRight="none"):o&&"last"==n?(m=!0,r.style.borderTopRightRadius="5px",r.style.borderBottomRightRadius="5px",t.style.borderLeft="none"):o&&"middle"==n?(m=!0,t.style.borderRight="none",t.style.borderLeft="none"):"fakeFirst"==n?t.style.borderRight="none":"fakeFirstLast"==n&&(m=!0,t.style.borderLeft="none",r.style.borderTopRightRadius="5px",r.style.borderBottomRightRadius="5px"),i.offeredForTrade&&(r.style.backgroundColor="var(--eSolve-yellow)",r.style.borderColor="var(--eSolve-yellow)");const u=i.offeredForTrade?"":"empl-dashboard-hide-element",v=!l&&(i.leftArrow||i.leftArrow&&i.rightArrow)?"esolve-triangle-left":"empl-dashboard-hide-element",_=!l&&(i.leftArrow||i.leftArrow&&i.rightArrow)?"":"empl-dashboard-hide-element",f=!l&&(i.rightArrow||i.leftArrow&&i.rightArrow)?"esolve-triangle-right":"empl-dashboard-hide-element";let b="",g="",M="";if(g='\n            <div class="row empl-dashboard-job">\n                <div class="col-11"></div>\n                <div class="col-1 empl-dashboard-trade-icon-container '+u+'">\n                    <i class="fa fa-refresh empl-dashboard-trade-icon" aria-hidden="true"></i>\n                </div>\n            </div>\n            <div class="row empl-dashboard-job">\n                <div class="col-12 p-0">\n                    <div class="pull-right '+f+'"></div>\n                </div>\n            </div>\n        ',(1==this.numberOfDisplayedColumns||l||m)&&(b='\n                <div class="col-6">\n                    <div class="row">\n                        <div class="col-12 empl-dashboard-trade-icon-container '+u+'">\n                            <i class="fa fa-refresh empl-dashboard-trade-icon employee-job-trade-icon-style" aria-hidden="true"></i>\n                        </div>\n                    </div>\n                </div>\n            ',M='\n                <div class="col-1 p-0">\n                    <div class="pull-right '+f+'"></div>\n                </div>\n            '),!o||"first"==n||"fakeFirst"==n||"fakeFirstLast"==n){r.style.color="white",r.style.fontSize="0.85em",r.style.lineHeight="1.4",r.style.paddingLeft="5px";const Zt='\n                <div class="row empl-dashboard-job d-flex justify-content-between">\n                    <div class="col-12">\n                        <div class="row trade-icon-parent">\n                            <div class="col-6">\n                                <div class="row">\n                                    <div class="p-0 '+_+'">\n                                        <div class="'+v+'"></div>\n                                    </div>\n                                    <div class="col-11 p-0 empl-schedule-job-duration">\n                                    '+d(i.startDateTime).clone().format("hh:mma")+"-"+d(i.endDateTime).clone().format("hh:mma")+"\n                                    </div>\n                                </div>\n                            </div>"+b+'</div>\n                        <div class="row">\n                            <div class="col-12">\n                                <div class="row right-arrow-indicator-parent">\n                                    <div class="col-11 p-0 empl-dashboard-assigned-details">\n                                        <i class="fa fa-user" aria-hidden="true"></i>'+i.employeeRequired+"/"+i.employeesAssigned+"\n                                    </div>"+M+'</div>\n                            </div>\n                            <div class="col-1">\n                                <div class="row">\n                                    \n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ';r.innerHTML=Zt}m&&(o&&"last"==n||o&&"middle"==n)&&(r.innerHTML=g),t.appendChild(r)}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.s),e.Y36(S.G))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dashboard-my-schedule"]],inputs:{onJobTraded:"onJobTraded"},decls:2,vars:0,consts:[[1,"table-responsive"],["id","empl_dashboard_my_schedule_table",1,"table","table-bordered","empl-dashboard-my-schedule-font-12"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"table",1),e.qZA())},styles:[".empl-dashboard-my-schedule-font-12[_ngcontent-%COMP%]{font-size:12px}"]}),a})();var ee=c(36183),h=c(67939),te=c(16717),ae=c(47428),P=c(79944),T=c(16558);let q=(()=>{class a{transform(t){return t?t=new D.uU(T.gR).transform(t,T.Pn):[]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"DateDashboardTransformPipe",type:a,pure:!0}),a})(),oe=(()=>{class a{transform(t){return t?t=new D.uU(T.gR).transform(t,"HH:mm"):[]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"TimeDashboardTransformPipe",type:a,pure:!0}),a})(),N=(()=>{class a{transform(t){return t?t=new D.uU(T.gR).transform(t,T.Pn+" HH:mm"):[]}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.Yjl({name:"DateTimeDashboardTransformPipe",type:a,pure:!0}),a})();function se(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"Schedule: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.scheduleName," ")}}function ie(a,s){if(1&a&&(e.TgZ(0,"mat-cell",21)(1,"span",20),e._uU(2,"Subgroup: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.subGroupName," ")}}function ne(a,s){if(1&a&&(e.TgZ(0,"mat-cell",21)(1,"span",20),e._uU(2,"Job Type: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.jobTypeName," ")}}function re(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"Start Date: "),e.qZA(),e._uU(3),e.ALo(4,"DateTimeDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.jobStartDateTime)," ")}}function de(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"End Date: "),e.qZA(),e._uU(3),e.ALo(4,"DateTimeDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.jobEndDateTime)," ")}}const k=function(a){return{isInActive:a}};function le(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",22)(1,"div",23)(2,"button",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.acceptJobOffer(n))}),e._uU(3," Accept "),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.rejectJobOffer(n))}),e._uU(5," Reject "),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Q6J("disabled","Accepted"===t.statusName)("ngClass",e.VKq(4,k,!t.isActive)),e.xp6(2),e.Q6J("disabled","Rejected"===t.statusName)("ngClass",e.VKq(6,k,!t.isActive))}}function ce(a,s){1&a&&e._UZ(0,"mat-row")}let he=(()=>{class a{constructor(t,o,i,n,r){this._jobOfferService=t,this._dashboardService=o,this._messageService=i,this._notificationService=n,this.dialog=r,this.displayedColumns=["scheduleName","subgroupName","jobTypeName","startDateTime","endDateTime","actions"],this._completed=new x.x,this.data=new h.by,this.jobOffersData=[],this.currentTab=""}ngOnInit(){this._dashboardService.getTabChangedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.currentTab=t,this.periodChanged(this._dashboardService.getCurrentPeriod())}),this._subscription=this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t))}periodChanged(t){"Job Offers Available"==this.currentTab&&(this._periodInformation=t,this._dashboardService.getEmployeeDashboardDataForJobOffers(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).subscribe(o=>{this.jobOffersData=o,this.populateTableData()}))}populateTableData(){this.data=new h.by(this.jobOffersData)}acceptJobOffer(t){this._jobOfferService.acceptOrRejectJobOffer(t.jobOfferID,!0).pipe((0,p.R)(this._completed)).subscribe(o=>{this.dialog.open(te.h,{autoFocus:!1,disableClose:!0,data:JSON.parse(o),width:"390px",panelClass:"confirm-dialog"}).afterClosed().subscribe(()=>{this._dashboardService.emitPeriodChangeEvent(this._periodInformation),this._notificationService.reloadUnreadNotificationsCount.next(0)})},o=>{this._messageService.open(o)},()=>{})}rejectJobOffer(t){this._jobOfferService.acceptOrRejectJobOffer(t.jobOfferID,!1).pipe((0,p.R)(this._completed)).subscribe(o=>{this._dashboardService.emitPeriodChangeEvent(this._periodInformation),this._notificationService.reloadUnreadNotificationsCount.next(0),this._messageService.open("Offer Rejected")},o=>{this._messageService.open(o)},()=>{})}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ae.i),e.Y36(C.s),e.Y36(S.G),e.Y36(ee.T),e.Y36(P.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dashboard-job-offers"]],decls:39,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"row","g-table-header"],[1,"col-12","d-flex","flex-row"],[1,"empl-dashboard-job-offers-fifth-row"],[1,"empl-dashboard-job-offers-fifth-row","empl-dashboard-job-offers-hide-on-medium-screen"],["id","empl_dashboard_job_offers_actions"],[3,"dataSource"],["matColumnDef","scheduleName"],["class","empl-dashboard-job-offers-schedule-detail",4,"matCellDef"],["matColumnDef","subgroupName"],["class","empl-dashboard-job-offers-schedule-detail empl-dashboard-job-offers-hide-on-medium-screen",4,"matCellDef"],["matColumnDef","jobTypeName"],["matColumnDef","startDateTime"],["matColumnDef","endDateTime"],["matColumnDef","actions"],["class","empl-dashboard-job-offers-actions-div-width",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[1,"empl-dashboard-job-offers-schedule-detail"],[1,"g-mobile-label"],[1,"empl-dashboard-job-offers-schedule-detail","empl-dashboard-job-offers-hide-on-medium-screen"],[1,"empl-dashboard-job-offers-actions-div-width"],[1,"d-flex","justify-content-between","empl-dashboard-job-offers-align-buttons-padding"],["id","empl_dashboard_job_offers_modify_btn","type","button",1,"btn","empl-dashboard-job-offers-action-button","pull-right","border-0",3,"disabled","ngClass","click"],["id","empl_dashboard_job_offers_reject_btn","type","button",1,"btn","empl-dashboard-job-offers-action-button","pull-right","border-0",3,"disabled","ngClass","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p"),e._uU(7,"Schedule"),e.qZA()(),e.TgZ(8,"div",6)(9,"p"),e._uU(10,"Subgroup"),e.qZA()(),e.TgZ(11,"div",6)(12,"p"),e._uU(13,"Job Type"),e.qZA()(),e.TgZ(14,"div",5)(15,"p"),e._uU(16,"Start Date Time"),e.qZA()(),e.TgZ(17,"div",5)(18,"p"),e._uU(19,"End Date Time"),e.qZA()(),e.TgZ(20,"div",7)(21,"p"),e._uU(22,"Actions"),e.qZA()()()(),e.TgZ(23,"div",1)(24,"div",2)(25,"mat-table",8),e.ynx(26,9),e.YNc(27,se,4,1,"mat-cell",10),e.BQk(),e.ynx(28,11),e.YNc(29,ie,4,1,"mat-cell",12),e.BQk(),e.ynx(30,13),e.YNc(31,ne,4,1,"mat-cell",12),e.BQk(),e.ynx(32,14),e.YNc(33,re,5,3,"mat-cell",10),e.BQk(),e.ynx(34,15),e.YNc(35,de,5,3,"mat-cell",10),e.BQk(),e.ynx(36,16),e.YNc(37,le,6,8,"mat-cell",17),e.BQk(),e.YNc(38,ce,1,0,"mat-row",18),e.qZA()()()()()()),2&t&&(e.xp6(25),e.Q6J("dataSource",o.data),e.xp6(13),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[D.mk,h.BZ,h.w1,h.Dz,h.nj,h.ev,h.Gk,N],styles:[".empl-dashboard-job-offers-fifth-row[_ngcontent-%COMP%]{width:calc((100% - 230px)/5);border-bottom:1px solid rgba(0,0,0,.12)}#empl_dashboard_job_offers_actions[_ngcontent-%COMP%]{width:230px;border-bottom:1px solid rgba(0,0,0,.12)}mat-cell[_ngcontent-%COMP%]:first-of-type, mat-footer-cell[_ngcontent-%COMP%]:first-of-type, mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-cell[_ngcontent-%COMP%]:last-of-type, mat-footer-cell[_ngcontent-%COMP%]:last-of-type, mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:5px}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0 0 230px;flex:0 0 230px}.empl-dashboard-job-offers-action-button[_ngcontent-%COMP%]{height:30px;width:110px;font-size:12px;font-weight:700;text-align:center;text-decoration:none;border:none;outline:none;background-color:#d6dce2;color:#404f64;box-shadow:none;margin-right:3px}th[_ngcontent-%COMP%]{font-weight:600;font-size:12px;color:#42536f}.empl-dashboard-job-offers-schedule-detail[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f;width:100%}td.mat-column-type[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f}.mat-column-type[_ngcontent-%COMP%]{position:relative;width:33.33%}.empl-dashboard-job-offers-actions-div-width[_ngcontent-%COMP%]{width:230px}.empl-dashboard-job-offers-align-buttons-padding[_ngcontent-%COMP%]{padding-right:0;padding-left:3px}.isInActive[_ngcontent-%COMP%]{pointer-events:none}@media (max-width: 992px){#empl_dashboard_job_offers_modify_btn[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 860px){.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start;height:220px}.g-table-header[_ngcontent-%COMP%]{display:none}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0;flex:0}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (min-width: 861px) and (max-width: 1199px){.empl-dashboard-job-offers-hide-on-medium-screen[_ngcontent-%COMP%]{display:none}.empl-dashboard-job-offers-fifth-row[_ngcontent-%COMP%]{width:calc((100% - 230px) / 3)!important;border-bottom:1px solid rgba(0,0,0,.12)}}@media (max-width: 576px){.mat-column-type[_ngcontent-%COMP%]{width:100%}}@media (max-width: 485px){.empl-dashboard-job-offers-action-button[_ngcontent-%COMP%]{width:70px}}@media (max-width: 375px){.empl-dashboard-job-offers-action-button[_ngcontent-%COMP%]{width:57px;padding-left:6px;padding-right:6px}}@media (max-width: 370px){mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (max-width: 385px){.empl-dashboard-job-offers-schedule-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:70px}}"]}),a})();function me(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"Schedule: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.scheduleName," ")}}function pe(a,s){if(1&a&&(e.TgZ(0,"mat-cell",21)(1,"span",20),e._uU(2,"Subgroup: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.subGroupName," ")}}function ue(a,s){if(1&a&&(e.TgZ(0,"mat-cell",21)(1,"span",20),e._uU(2,"Job Type: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.jobTypeName," ")}}function be(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"Start Date: "),e.qZA(),e._uU(3),e.ALo(4,"DateTimeDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.jobStartDateTime)," ")}}function fe(a,s){if(1&a&&(e.TgZ(0,"mat-cell",19)(1,"span",20),e._uU(2,"End Date: "),e.qZA(),e._uU(3),e.ALo(4,"DateTimeDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.jobEndDateTime)," ")}}function ge(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",22)(1,"div",23)(2,"button",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.acceptJobTrade(n))}),e._uU(3," Accept "),e.qZA(),e.TgZ(4,"button",25),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.declineJobTrade(n))}),e._uU(5," Decline "),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(2),e.Q6J("disabled","Accepted"===t.statusName),e.xp6(2),e.Q6J("disabled","Rejected"===t.statusName)}}function _e(a,s){1&a&&e._UZ(0,"mat-row")}let De=(()=>{class a{constructor(t,o,i,n,r){this._dashboardService=t,this._jobTradeService=o,this._messageService=i,this.dialog=n,this._dialogService=r,this.displayedColumns=["scheduleName","subgroupName","jobTypeName","startDateTime","endDateTime","actions"],this._completed=new x.x,this.data=new h.by,this.currentTab="",this.tradeBoardsData=[]}ngOnInit(){this._dashboardService.getTabChangedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.currentTab=t,this.periodChanged(this._dashboardService.getCurrentPeriod())}),this._subscription=this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t))}periodChanged(t){"Trades Available"==this.currentTab&&(this._periodInformation=t,this._dashboardService.getEmployeeDashboardDataForTradesAvailable(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).subscribe(o=>{this.tradeBoardsData=o,this.populateTableData()}))}populateTableData(){this.data=new h.by(this.tradeBoardsData)}acceptJobTrade(t){this._jobTradeService.getAcceptTradeWarning().pipe((0,p.R)(this._completed)).subscribe(o=>{this._dialogService.openConfirmDialog("TradeAccept",o).afterClosed().subscribe(i=>{i&&this._jobTradeService.acceptTradeOffer(t.jobOfferID).pipe((0,p.R)(this._completed)).subscribe(()=>{this._messageService.open("Trade Accepted."),this._dashboardService.emitPeriodChangeEvent(this._periodInformation)},n=>{let r=this._messageService.handleHttpError(n);404===n.status?this._messageService.open("Trade is no longer available."):400===n.status&&"The credentials you have entered for system email are invalid."==r?(this._dashboardService.emitPeriodChangeEvent(this._periodInformation),this._messageService.open(n)):this._messageService.open("Error accepting trade.")})})})}declineJobTrade(t){this._jobTradeService.declineTradeOffer(t.jobOfferID).pipe((0,p.R)(this._completed)).subscribe(()=>{this._messageService.open("Trade Declined."),this._dashboardService.emitPeriodChangeEvent(this._periodInformation)},o=>{this._messageService.open(404===o.status?"Trade is no longer available.":"Error declining trade.")})}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.s),e.Y36(E.v),e.Y36(S.G),e.Y36(P.uw),e.Y36(I.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dashboard-trade-boards"]],decls:39,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"row","g-table-header"],[1,"col-12","d-flex","flex-row"],[1,"empl-dashboard-job-trade-fifth-row"],[1,"empl-dashboard-job-trade-fifth-row","empl-dashboard-job-trade-hide-on-medium-screen"],["id","empl_dashboard_job_trade_actions"],[3,"dataSource"],["matColumnDef","scheduleName"],["class","empl-dashboard-job-trade-schedule-detail",4,"matCellDef"],["matColumnDef","subgroupName"],["class","empl-dashboard-job-trade-schedule-detail empl-dashboard-job-trade-hide-on-medium-screen",4,"matCellDef"],["matColumnDef","jobTypeName"],["matColumnDef","startDateTime"],["matColumnDef","endDateTime"],["matColumnDef","actions"],["class","empl-dashboard-job-trade-actions-div-width",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[1,"empl-dashboard-job-trade-schedule-detail"],[1,"g-mobile-label"],[1,"empl-dashboard-job-trade-schedule-detail","empl-dashboard-job-trade-hide-on-medium-screen"],[1,"empl-dashboard-job-trade-actions-div-width"],[1,"d-flex","justify-content-between","empl-dashboard-job-trade-align-buttons-padding"],["id","empl_dashboard_job_trade_modify_btn","type","button",1,"btn","empl-dashboard-job-trade-action-button","pull-right","border-0",3,"disabled","click"],["id","empl_dashboard_job_trade_reject_btn","type","button",1,"btn","empl-dashboard-job-trade-action-button","pull-right","border-0",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p"),e._uU(7,"Schedule"),e.qZA()(),e.TgZ(8,"div",6)(9,"p"),e._uU(10,"Subgroup"),e.qZA()(),e.TgZ(11,"div",6)(12,"p"),e._uU(13,"Job Type"),e.qZA()(),e.TgZ(14,"div",5)(15,"p"),e._uU(16,"Start Date Time"),e.qZA()(),e.TgZ(17,"div",5)(18,"p"),e._uU(19,"End Date Time"),e.qZA()(),e.TgZ(20,"div",7)(21,"p"),e._uU(22,"Actions"),e.qZA()()()(),e.TgZ(23,"div",1)(24,"div",2)(25,"mat-table",8),e.ynx(26,9),e.YNc(27,me,4,1,"mat-cell",10),e.BQk(),e.ynx(28,11),e.YNc(29,pe,4,1,"mat-cell",12),e.BQk(),e.ynx(30,13),e.YNc(31,ue,4,1,"mat-cell",12),e.BQk(),e.ynx(32,14),e.YNc(33,be,5,3,"mat-cell",10),e.BQk(),e.ynx(34,15),e.YNc(35,fe,5,3,"mat-cell",10),e.BQk(),e.ynx(36,16),e.YNc(37,ge,6,2,"mat-cell",17),e.BQk(),e.YNc(38,_e,1,0,"mat-row",18),e.qZA()()()()()()),2&t&&(e.xp6(25),e.Q6J("dataSource",o.data),e.xp6(13),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[h.BZ,h.w1,h.Dz,h.nj,h.ev,h.Gk,N],styles:[".empl-dashboard-job-trade-fifth-row[_ngcontent-%COMP%]{width:calc((100% - 230px)/5);border-bottom:1px solid rgba(0,0,0,.12)}#empl_dashboard_job_trade_actions[_ngcontent-%COMP%]{width:230px;border-bottom:1px solid rgba(0,0,0,.12)}mat-cell[_ngcontent-%COMP%]:first-of-type, mat-footer-cell[_ngcontent-%COMP%]:first-of-type, mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-cell[_ngcontent-%COMP%]:last-of-type, mat-footer-cell[_ngcontent-%COMP%]:last-of-type, mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:5px}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0 0 230px;flex:0 0 230px}.empl-dashboard-job-trade-action-button[_ngcontent-%COMP%]{height:30px;width:110px;font-size:12px;font-weight:700;text-align:center;text-decoration:none;border:none;outline:none;background-color:#d6dce2;color:#404f64;box-shadow:none;margin-right:3px}th[_ngcontent-%COMP%]{font-weight:600;font-size:12px;color:#42536f}.empl-dashboard-job-trade-schedule-detail[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f;width:100%}td.mat-column-type[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f}.mat-column-type[_ngcontent-%COMP%]{position:relative;width:33.33%}.empl-dashboard-job-trade-actions-div-width[_ngcontent-%COMP%]{width:230px}.empl-dashboard-job-trade-align-buttons-padding[_ngcontent-%COMP%]{padding-right:0;padding-left:3px}@media (max-width: 992px){#empl_dashboard_job_trade_modify_btn[_ngcontent-%COMP%]{margin-left:0}}@media (max-width: 860px){.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start;height:220px}.g-table-header[_ngcontent-%COMP%]{display:none}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0;flex:0}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (min-width: 861px) and (max-width: 1199px){.empl-dashboard-job-trade-hide-on-medium-screen[_ngcontent-%COMP%]{display:none}.empl-dashboard-job-trade-fifth-row[_ngcontent-%COMP%]{width:calc((100% - 230px) / 3)!important;border-bottom:1px solid rgba(0,0,0,.12)}}@media (max-width: 576px){.mat-column-type[_ngcontent-%COMP%]{width:100%}}@media (max-width: 485px){.empl-dashboard-job-trade-action-button[_ngcontent-%COMP%]{width:70px}}@media (max-width: 375px){.empl-dashboard-job-trade-action-button[_ngcontent-%COMP%]{width:57px;padding-left:6px;padding-right:6px}}@media (max-width: 370px){mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (max-width: 385px){.empl-dashboard-job-trade-schedule-detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:70px}}"]}),a})();function ve(a,s){if(1&a&&(e.TgZ(0,"span"),e._UZ(1,"i",16),e._uU(2),e.ALo(3,"DateDashboardTransformPipe"),e._UZ(4,"br"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,1,t.dashboardData.nextShift.jobEndDate)," ")}}function Ce(a,s){if(1&a&&(e.TgZ(0,"div",21),e._UZ(1,"br"),e.TgZ(2,"span",22),e._uU(3),e.qZA(),e._UZ(4,"br"),e._uU(5),e.qZA()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(t.dashboardData.nextShift.jobName),e.xp6(2),e.hij(" ",t.dashboardData.nextShift.subGroupName," ")}}function xe(a,s){1&a&&e._UZ(0,"i",27)}function Te(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.tradeJob(i.dashboardData.nextShift.jobID))}),e._uU(1),e.YNc(2,xe,1,0,"i",26),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("disabled",t.dashboardData.nextShift.offeredForTrade),e.xp6(1),e.hij(" ",t.dashboardData.nextShift.offeredForTrade?"Offered For Trade":"Trade Job"," "),e.xp6(1),e.Q6J("ngIf",!t.dashboardData.nextShift.offeredForTrade)}}function ye(a,s){if(1&a&&(e.TgZ(0,"div",23),e.YNc(1,Te,3,3,"button",24),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.dashboardData.nextShift.canTradeJob)}}const we=function(a){return{empl_dashboard_left_part_of_my_next_shift:a}};function Se(a,s){if(1&a&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",2)(3,"div",12)(4,"span",13),e._uU(5,"My Next Shift"),e.qZA()()(),e.TgZ(6,"div",14)(7,"div",15),e._UZ(8,"i",16),e._uU(9),e.ALo(10,"DateDashboardTransformPipe"),e._UZ(11,"br"),e.YNc(12,ve,5,3,"span",17),e._UZ(13,"i",18),e._uU(14),e.ALo(15,"TimeDashboardTransformPipe"),e.ALo(16,"TimeDashboardTransformPipe"),e.qZA(),e.YNc(17,Ce,6,2,"div",19),e.YNc(18,ye,2,1,"div",20),e.qZA()()()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngClass",e.VKq(13,we,null!=t.dashboardData.nextShift)),e.xp6(2),e.hij(" ",null!=t.dashboardData.nextShift&&t.dashboardData.nextShift.jobStartDate?e.lcZ(10,7,t.dashboardData.nextShift.jobStartDate):"-"," "),e.xp6(3),e.Q6J("ngIf",t.jobIsMultiday),e.xp6(2),e.AsE(" ",null!=t.dashboardData.nextShift&&t.dashboardData.nextShift.jobStartDate?e.lcZ(15,9,t.dashboardData.nextShift.jobStartDate):""," - ",null!=t.dashboardData.nextShift&&t.dashboardData.nextShift.jobEndDate?e.lcZ(16,11,t.dashboardData.nextShift.jobEndDate):""," "),e.xp6(3),e.Q6J("ngIf",t.dashboardData.nextShift),e.xp6(1),e.Q6J("ngIf",t.dashboardData.nextShift)}}const Me=function(a){return{"background-color":a}};function Pe(a,s){if(1&a&&(e.TgZ(0,"div",32)(1,"button",38),e._uU(2),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Me,t.dashboardData.upcomingLeave.absenceCodeColor?t.dashboardData.upcomingLeave.absenceCodeColor:"white")),e.xp6(1),e.hij(" ",t.dashboardData.upcomingLeave.absenceCodeName," ")}}function Ze(a,s){if(1&a&&(e.TgZ(0,"div",28)(1,"div",29)(2,"div",2)(3,"div",12)(4,"span",30),e._uU(5,"Upcoming Leave"),e.qZA()()(),e.TgZ(6,"div",31)(7,"div",32)(8,"div",2)(9,"div",12)(10,"div",33)(11,"div"),e._UZ(12,"i",34)(13,"i",35),e.qZA(),e.TgZ(14,"div",36),e._uU(15),e.ALo(16,"DateDashboardTransformPipe"),e._UZ(17,"br"),e._uU(18),e.ALo(19,"DateDashboardTransformPipe"),e.qZA()()()()(),e.YNc(20,Pe,3,4,"div",37),e.qZA()()()),2&a){const t=e.oxw();e.xp6(15),e.hij(" ",null!=t.dashboardData.upcomingLeave&&t.dashboardData.upcomingLeave.absenceStartDate?e.lcZ(16,3,t.dashboardData.upcomingLeave.absenceStartDate):"-",""),e.xp6(3),e.hij(" ",null!=t.dashboardData.upcomingLeave&&t.dashboardData.upcomingLeave.absenceEndDate?e.lcZ(19,5,t.dashboardData.upcomingLeave.absenceEndDate):"-"," "),e.xp6(2),e.Q6J("ngIf",t.dashboardData.upcomingLeave)}}function Oe(a,s){if(1&a&&(e.TgZ(0,"div",39)(1,"div",40)(2,"div",2)(3,"div",12)(4,"span",41),e._uU(5,"Scheduled Shifts"),e.qZA()(),e.TgZ(6,"div",12)(7,"span",42),e._uU(8),e.qZA()()(),e.TgZ(9,"div",2)(10,"div",12),e._UZ(11,"i",16),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(8),e.hij(" ",t.dashboardData.scheduledJobs," ")}}function Ae(a,s){if(1&a&&(e.TgZ(0,"div",43)(1,"div",40)(2,"div",2)(3,"div",12)(4,"span",41),e._uU(5,"Scheduled Hours"),e.qZA()(),e.TgZ(6,"div",12)(7,"span",42),e._uU(8),e.qZA()()(),e.TgZ(9,"div",2)(10,"div",12),e._UZ(11,"i",18),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(8),e.hij(" ",t.dashboardData.scheduledHours," ")}}function je(a,s){if(1&a&&(e.TgZ(0,"div",44)(1,"div",40)(2,"div",2)(3,"div",12)(4,"span",41),e._uU(5,"Absence Hours"),e.qZA()(),e.TgZ(6,"div",12)(7,"span",42),e._uU(8),e.qZA()()(),e.TgZ(9,"div",2)(10,"div",12),e._UZ(11,"i",45)(12,"i",46),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(8),e.hij(" ",t.dashboardData.approvedAbsenceHours," ")}}function Ue(a,s){1&a&&(e.TgZ(0,"p"),e._uU(1,"My Schedule"),e.qZA())}function Ye(a,s){if(1&a&&(e.TgZ(0,"mat-tab",53),e.YNc(1,Ue,2,0,"ng-template",54),e._UZ(2,"app-employee-dashboard-my-schedule",55),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("onJobTraded",t.jobTradedEventSubject.asObservable())}}function Ie(a,s){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij("Job Offers Available (",t.dashboardData.numberOfJobOffers,")")}}function Ee(a,s){1&a&&(e.TgZ(0,"mat-tab",56),e.YNc(1,Ie,2,1,"ng-template",54),e._UZ(2,"app-employee-dashboard-job-offers"),e.qZA())}function qe(a,s){if(1&a&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij("Trades Available (",t.dashboardData.numberOfJobTrades,")")}}function Ne(a,s){1&a&&(e.TgZ(0,"mat-tab",57),e.YNc(1,qe,2,1,"ng-template",54),e._UZ(2,"app-employee-dashboard-trade-boards"),e.qZA())}function ke(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",12)(2,"div",47)(3,"mat-tab-group",48,49),e.NdJ("selectedTabChange",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.emplDashboardTabChanged(i))}),e.YNc(5,Ye,3,1,"mat-tab",50),e.YNc(6,Ee,3,0,"mat-tab",51),e.YNc(7,Ne,3,0,"mat-tab",52),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.canEmployeeAccesSchedule),e.xp6(1),e.Q6J("ngIf",t.canEmployeeAccessJobOffers),e.xp6(1),e.Q6J("ngIf",t.canEmployeeAccessTradeBoard)}}let Je=(()=>{class a{constructor(t,o,i,n,r,l,m){this._dashboardService=t,this._profileService=o,this._messageService=i,this._tradeService=n,this._dialogService=r,this._roles=l,this._userRoleService=m,this.dashboardData={scheduledJobs:0,scheduledHours:"0",approvedAbsenceHours:"0",nextShift:new G(0,"","","","",!0),upcomingLeave:new $(0,"","","",""),numberOfJobOffers:0,numberOfJobTrades:0},this._subscription=null,this._completed=new x.x,this.currentTab="My Schedule",this.canEmployeeAccessAbsence=!0,this.canEmployeeAccessJobOffers=!0,this.canEmployeeAccessTradeBoard=!0,this.canEmployeeAccesSchedule=!0,this.ticksPerMillisecond=1e4,this.jobIsMultiday=!1,this.jobTradedEventSubject=new x.x}ngOnInit(){this.getProfile();let t=new e.vpe;this._userRoleService.refetchPermissions.pipe((0,p.R)(t)).subscribe(()=>{setTimeout(()=>{let o=this._userRoleService.getGlobalAccountPermissions();this.setPermissions(o),t.next(!0),t.complete()},200)}),this._subscription=this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(o=>this.periodChanged(o))}periodChanged(t){this._periodInformation=t,this.populateData()}populateData(){this._dashboardService.getEmployeeDashboardData(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).subscribe(t=>{if(this.dashboardData={scheduledJobs:t.scheduledJobs,scheduledHours:t.scheduledHours,approvedAbsenceHours:t.approvedAbsenceHours,nextShift:t.nextJob,upcomingLeave:t.upcomingLeave,numberOfJobOffers:t.numberOfJobOffers,numberOfJobTrades:t.numberOfJobTrades},this.dashboardData.nextShift&&d(this.dashboardData.nextShift.jobStartDate).clone().isSame(d(this.dashboardData.nextShift.jobEndDate).clone(),"day")&&(this.dashboardData.nextShift.isMultiday=!1),parseInt(this.dashboardData.scheduledHours)>0&&(this.dashboardData.scheduledHours=this.convertTicksToTime(this.dashboardData.scheduledHours)),parseInt(this.dashboardData.approvedAbsenceHours)>0&&(this.dashboardData.approvedAbsenceHours=this.convertTicksToTime(this.dashboardData.approvedAbsenceHours)),t.nextJob){let o=0;const i=d(t.nextJob.jobStartDate).clone().set({hour:0,minute:0,second:0,millisecond:0});o=d(t.nextJob.jobEndDate).clone().set({hour:0,minute:0,second:0,millisecond:0}).diff(i,"days"),this.jobIsMultiday=o>1}})}convertTicksToTime(t){const o=Number(t)/this.ticksPerMillisecond;let i=Math.trunc(d.duration(o).asHours()).toString(),n=d.duration(o).minutes().toString();return i=i.length<2?"0"+i:i,n=n.length<2?"0"+n:n,i+":"+n}getProfile(){let t=this._userRoleService.getGlobalAccountPermissions();this.setPermissions(t)}setPermissions(t){t?(this.canEmployeeAccessAbsence=t.canEmployeeAccessAbsenceCalendar,this.canEmployeeAccessJobOffers=t.canEmployeeAccessJobOffers,this.canEmployeeAccessTradeBoard=t.canEmployeeAccessTradeBoard,this.canEmployeeAccesSchedule=t.canEmployeeViewSchedule):(this.canEmployeeAccessAbsence=!1,this.canEmployeeAccessJobOffers=!1,this.canEmployeeAccessTradeBoard=!1,this.canEmployeeAccesSchedule=!1)}emplDashboardTabChanged(t){this.currentTab=t.tab.textLabel,this._dashboardService.emitTabChangedEvent(this.currentTab)}tradeJob(t){this._tradeService.getTradeWarning().pipe((0,p.R)(this._completed)).subscribe(o=>{this._dialogService.openConfirmDialog("TradeOffer",o).afterClosed().subscribe(i=>{i?this._tradeService.offerJob(Number(this._roles.getId()),t).pipe((0,p.R)(this._completed)).subscribe(()=>{this._messageService.open("Job offered for trade"),this.populateData(),this.jobTradedEventSubject.next()},n=>{this._messageService.open(n);const r=this._messageService.handleHttpError(n);400==n.status&&"The credentials you have entered for system email are invalid."===r&&(this.populateData(),this.jobTradedEventSubject.next())}):this._messageService.open("Trade Canceled")})})}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.s),e.Y36(U.H),e.Y36(S.G),e.Y36(E.v),e.Y36(I.x),e.Y36(W.t),e.Y36(j.J))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dashboard"]],decls:10,vars:6,consts:[[1,"container-fluid","empl-dashboard-main-container"],[1,"g-thin-black-scroll-bar"],[1,"row"],["class","col-xl-6 col-12",4,"ngIf"],["class","col-xl-6 col-12 g-font-size-12",4,"ngIf"],[1,"row","mt-3"],["class","col-xl-4 col-sm-6 col-12 empl-dashboard-scheduled-jobs-div",4,"ngIf"],["class","col-xl-4 col-sm-6 col-12 empl-dashboard-scheduled-hours-div",4,"ngIf"],["class","col-xl-4 col-sm-6 col-12 empl-dashboard-absence-hours-div",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"col-xl-6","col-12"],[1,"empl-dashboard-card2","empl-dashboard-card2a"],[1,"col-12"],["id","empl_dashboard_my_next_shift_title"],["id","empl_dashboard_my_next_shift_div",1,"row"],["id","empl_dashboard_left_part_of_my_next_shift",1,"col-sm-4","g-font-size-12","align-self-end",3,"ngClass"],["aria-hidden","true",1,"fa","fa-calendar"],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-clock-o"],["class","col-sm-4 g-font-size-12",4,"ngIf"],["class","col-sm-4 empl_dashboard_next_shift_margin",4,"ngIf"],[1,"col-sm-4","g-font-size-12"],["id","empl_dashboard_next_shift_job_name"],[1,"col-sm-4","empl_dashboard_next_shift_margin"],["class","btn btn-warning g-font-size-12 float-right","id","empl_dashboard_trade_job_btn",3,"disabled","click",4,"ngIf"],["id","empl_dashboard_trade_job_btn",1,"btn","btn-warning","g-font-size-12","float-right",3,"disabled","click"],["class","fa fa-retweet","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-retweet"],[1,"col-xl-6","col-12","g-font-size-12"],[1,"empl-dashboard-card2"],["id","empl_dashboard_upcoming_leave_title"],[1,"row","empl_dashboard_upcoming_leave_data_margin"],[1,"col-sm-6"],[1,"d-flex","justify-content-start"],["id","empl_dashboard_upcoming_leave_icon1","aria-hidden","true",1,"fa","fa-circle"],["id","empl_dashboard_upcoming_leave_icon2","aria-hidden","true",1,"fa","fa-long-arrow-down"],["id","empl_dashboard_absence_date"],["class","col-sm-6",4,"ngIf"],["id","empl_dashboard_upcoming_leave_absence_code_name",1,"btn","btn-dark","g-font-size-12","float-right",3,"ngStyle"],[1,"col-xl-4","col-sm-6","col-12","empl-dashboard-scheduled-jobs-div"],[1,"d-flex","justify-content-between","empl-dashboard-card"],[1,"card_title"],[1,"card_number"],[1,"col-xl-4","col-sm-6","col-12","empl-dashboard-scheduled-hours-div"],[1,"col-xl-4","col-sm-6","col-12","empl-dashboard-absence-hours-div"],["aria-hidden","true",1,"fa","fa-long-arrow-left","empl-dashboard-arrow-icon"],["aria-hidden","true",1,"fa","fa-user"],[1,"empl-dashboard-card3"],[1,"g-dashboard-table-labels",3,"selectedTabChange"],["emplDashboardTabGroup",""],["label","My Schedule",4,"ngIf"],["label","Job Offers Available",4,"ngIf"],["label","Trades Available",4,"ngIf"],["label","My Schedule"],["mat-tab-label",""],[3,"onJobTraded"],["label","Job Offers Available"],["label","Trades Available"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Se,19,15,"div",3),e.YNc(4,Ze,21,7,"div",4),e.qZA(),e.TgZ(5,"div",5),e.YNc(6,Oe,12,1,"div",6),e.YNc(7,Ae,12,1,"div",7),e.YNc(8,je,13,1,"div",8),e.qZA(),e.YNc(9,ke,8,3,"div",9),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",o.canEmployeeAccesSchedule),e.xp6(1),e.Q6J("ngIf",o.canEmployeeAccessAbsence),e.xp6(2),e.Q6J("ngIf",o.canEmployeeAccesSchedule),e.xp6(1),e.Q6J("ngIf",o.canEmployeeAccesSchedule),e.xp6(1),e.Q6J("ngIf",o.canEmployeeAccessAbsence),e.xp6(1),e.Q6J("ngIf",o.canEmployeeAccesSchedule||o.canEmployeeAccessJobOffers||o.canEmployeeAccessTradeBoard))},dependencies:[D.mk,D.O5,D.PC,y.SP,y.uD,y.uX,X,he,De,q,oe],styles:[".g-thin-black-scroll-bar[_ngcontent-%COMP%]{height:calc(100vh - 133px);overflow-wrap:break-word;padding-right:5px}.empl-dashboard-card[_ngcontent-%COMP%], .empl-dashboard-card2[_ngcontent-%COMP%], .empl-dashboard-card3[_ngcontent-%COMP%]{background-color:var(--eSolve-white);border:1px solid #A5A5B6;border-radius:10px;padding:6px 12px}.empl-dashboard-card2[_ngcontent-%COMP%]{padding:15px;height:110px}.empl-dashboard-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666679;font-size:200%}.empl-dashboard-card2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666679}.empl-dashboard-card[_ngcontent-%COMP%]   .card_title[_ngcontent-%COMP%]{font-size:12px}.empl-dashboard-card[_ngcontent-%COMP%]   .card_number[_ngcontent-%COMP%]{font-size:25px}.empl-dashboard-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:15px}.empl-dashboard-arrow-icon[_ngcontent-%COMP%]{position:absolute!important;right:21px!important;top:21px!important}.empl_dashboard_left_part_of_my_next_shift[_ngcontent-%COMP%]{border-right:1px solid silver}.empl_dashboard_next_shift_margin[_ngcontent-%COMP%]{margin-top:18px}.empl_dashboard_upcoming_leave_data_margin[_ngcontent-%COMP%]{margin-top:15px}#empl_dashboard_my_next_shift_title[_ngcontent-%COMP%]{font-size:15px;font-weight:bolder}#empl_dashboard_next_shift_job_name[_ngcontent-%COMP%]{font-weight:bolder}#empl_dashboard_trade_job_btn[_ngcontent-%COMP%]{color:#fff;background-color:#e9be04;width:130px}#empl_dashboard_trade_job_btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px;color:#fff}#empl_dashboard_upcoming_leave_title[_ngcontent-%COMP%]{font-size:15px;font-weight:bolder}#empl_dashboard_upcoming_leave_icon1[_ngcontent-%COMP%]{font-size:9px!important}#empl_dashboard_upcoming_leave_icon2[_ngcontent-%COMP%]{position:absolute!important;left:15px;top:14px;font-size:18px}#empl_dashboard_upcoming_leave_absence_code_name[_ngcontent-%COMP%]{padding:0 5px;border-radius:3px;cursor:default;width:130px;color:#000;height:32px;margin-top:2px;box-shadow:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#empl_dashboard_my_next_shift_div[_ngcontent-%COMP%]{height:54px}#empl_dashboard_absence_date[_ngcontent-%COMP%]{margin-left:3px}@media (max-width: 575px){.empl-dashboard-card2[_ngcontent-%COMP%]{height:180px}#empl_dashboard_trade_job_btn[_ngcontent-%COMP%], #empl_dashboard_upcoming_leave_absence_code_name[_ngcontent-%COMP%]{float:left!important}#empl_dashboard_left_part_of_my_next_shift[_ngcontent-%COMP%]{border:none}#empl_dashboard_upcoming_leave_absence_code_name[_ngcontent-%COMP%]{margin-top:33px}.empl-dashboard-scheduled-hours-div[_ngcontent-%COMP%]{margin-bottom:5px}.empl-dashboard-main-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 1199px){.empl-dashboard-scheduled-jobs-div[_ngcontent-%COMP%], .empl-dashboard-card2a[_ngcontent-%COMP%]{margin-bottom:5px}}"]}),a})();var Z=c(74650);class He{constructor(s,t,o,i,n,r,l,m,u,v,_,f,b){this.activeSchedules=s,this.scheduleHours=t,this.scheduleJobSlots=o,this.assignedJobs=i,this.scheduledHours=n,this.requiredHours=r,this.requiredVsScheduledHours=l,this.unassignedJobs=m,this.invalidAssignments=u,this.isScheduleManager=v,this.isAbsenceManager=_,this.absenceRequestPending=f,this.scheduleApprovalsPending=b}}function Be(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Name: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.name," ")}}function Re(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Hours: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit,o=e.oxw();e.xp6(3),e.hij("",o.convertTicksToTime(t.hours)," ")}}function Qe(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Jobs: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.jobs," ")}}function Le(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Job Slots: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.jobSlots," ")}}function ze(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Assigned: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.assigned," ")}}function Ve(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Unassigned: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.unassigned," ")}}function Fe(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Invalid: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.invalid," ")}}function Ge(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",25)(1,"button",26),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewScheduleDetails(n))}),e.TgZ(2,"p"),e._uU(3,"View Details"),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(1),e.s9C("id",t.name)}}function $e(a,s){1&a&&e._UZ(0,"mat-row")}let We=(()=>{class a{constructor(t,o,i){this.dialog=t,this._dashboardService=o,this._router=i,this.displayedColumns=["name","hours","jobs","jobSlots","assigned","unassigned","invalid","actions"],this.data=new h.by,this.dataSource=new h.by,this._completed=new x.x,this.currentTab="",this.userDashboardScheduleDetailsData=[]}ngOnInit(){this._dashboardService.getTabChangedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.currentTab=t,this.periodChanged(this._dashboardService.getCurrentPeriod())}),this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t))}periodChanged(t){("Schedule Details"==this.currentTab||""==this.currentTab)&&(this._periodInformation=t,this._dashboardService.getUserDashboardDataForScheduleDetails(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).pipe((0,p.R)(this._completed)).subscribe(o=>{this.userDashboardScheduleDetailsData=o,this.populateTableData()}))}populateTableData(){this.data=new h.by(this.userDashboardScheduleDetailsData),this.startDate=d(this._periodInformation.startDate).format("YYYY-MM-DD"),this.endDate=d(this._periodInformation.endDate).format("YYYY-MM-DD")}viewScheduleDetails(t){this._router.navigateByUrl("/scheduler",{state:{source:"dashboard",scheduleID:t.id,startDate:this.startDate,endDate:this.endDate,currentView:"resourceTimelinePayPeriod"==this._periodInformation.defaultView?"payPeriod":this._periodInformation.defaultView}})}getScreenSize(t){this.displayedColumns=t.target.innerWidth>860&&t.target.innerWidth<1200?["name","hours","jobs","jobSlots","actions"]:["name","hours","jobs","jobSlots","assigned","unassigned","invalid","actions"]}convertTicksToTime(t){const o=Number(t)/1e4;let i=Math.trunc(d.duration(o).asHours()).toString(),n=d.duration(o).minutes().toString();return i=i.length<2?"0"+i:i,n=n.length<2?"0"+n:n,i+":"+n}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.uw),e.Y36(C.s),e.Y36(w.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-dashboard-schedule-details"]],hostBindings:function(t,o){1&t&&e.NdJ("resize",function(n){return o.getScreenSize(n)},!1,e.Jf7)},decls:49,vars:2,consts:[[1,"container-fluid"],[1,"row","g-user-dashboard-tab-container"],[1,"col-12"],[1,"row","g-table-header"],[1,"col-12","d-flex","flex-row"],[1,"user-dashboard-seventh-row"],[1,"user-dashboard-seventh-row","user-dashboard-hide-on-medium-screen"],["id","g-actions-column-width"],[1,"row"],[3,"dataSource"],["matColumnDef","name"],["class","user-dashboard-schedule-detail",4,"matCellDef"],["matColumnDef","hours"],["matColumnDef","jobs"],["matColumnDef","jobSlots"],["matColumnDef","assigned"],["class","user-dashboard-schedule-detail user-dashboard-hide-on-medium-screen",4,"matCellDef"],["matColumnDef","unassigned"],["matColumnDef","invalid"],["matColumnDef","actions"],["class","user-dashboard-visible-on-small-screen-370px",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[1,"user-dashboard-schedule-detail"],[1,"user-dashboard-mobile-label"],[1,"user-dashboard-schedule-detail","user-dashboard-hide-on-medium-screen"],[1,"user-dashboard-visible-on-small-screen-370px"],[1,"btn","user-dashboard-details-button","pull-right","border-0",3,"id","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p"),e._uU(7,"Schedule"),e.qZA()(),e.TgZ(8,"div",5)(9,"p"),e._uU(10,"Hours"),e.qZA()(),e.TgZ(11,"div",5)(12,"p"),e._uU(13,"Jobs"),e.qZA()(),e.TgZ(14,"div",5)(15,"p"),e._uU(16,"Job Slots"),e.qZA()(),e.TgZ(17,"div",6)(18,"p"),e._uU(19,"Assigned"),e.qZA()(),e.TgZ(20,"div",6)(21,"p"),e._uU(22,"Unassigned"),e.qZA()(),e.TgZ(23,"div",6)(24,"p"),e._uU(25,"Invalid"),e.qZA()(),e.TgZ(26,"div",7)(27,"p"),e._uU(28,"Actions"),e.qZA()()()(),e.TgZ(29,"div",8)(30,"div",2)(31,"mat-table",9),e.ynx(32,10),e.YNc(33,Be,4,1,"mat-cell",11),e.BQk(),e.ynx(34,12),e.YNc(35,Re,4,1,"mat-cell",11),e.BQk(),e.ynx(36,13),e.YNc(37,Qe,4,1,"mat-cell",11),e.BQk(),e.ynx(38,14),e.YNc(39,Le,4,1,"mat-cell",11),e.BQk(),e.ynx(40,15),e.YNc(41,ze,4,1,"mat-cell",16),e.BQk(),e.ynx(42,17),e.YNc(43,Ve,4,1,"mat-cell",16),e.BQk(),e.ynx(44,18),e.YNc(45,Fe,4,1,"mat-cell",16),e.BQk(),e.ynx(46,19),e.YNc(47,Ge,4,1,"mat-cell",20),e.BQk(),e.YNc(48,$e,1,0,"mat-row",21),e.qZA()()()()()()),2&t&&(e.xp6(31),e.Q6J("dataSource",o.data),e.xp6(17),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[h.BZ,h.w1,h.Dz,h.nj,h.ev,h.Gk],styles:[".user-dashboard-seventh-row[_ngcontent-%COMP%]{width:calc((100% - 115px) / 7);border-bottom:1px solid rgba(0,0,0,.12)}mat-cell[_ngcontent-%COMP%]:first-of-type, mat-footer-cell[_ngcontent-%COMP%]:first-of-type, mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-cell[_ngcontent-%COMP%]:last-of-type, mat-footer-cell[_ngcontent-%COMP%]:last-of-type, mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:5px}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0 0 115px;flex:0 0 115px}.user-dashboard-details-button[_ngcontent-%COMP%]{height:30px;width:110px;font-size:12px;font-weight:700;text-align:center;text-decoration:none;border:none;outline:none;color:#fff;background-color:var(--eSolve-primary);box-shadow:none}th[_ngcontent-%COMP%]{font-weight:600;font-size:12px;color:#42536f}.user-dashboard-schedule-detail[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f;width:100%}td.mat-column-type[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f}.mat-column-type[_ngcontent-%COMP%]{position:relative;width:33.33%}.user-dashboard-mobile-label[_ngcontent-%COMP%]{display:none}.visible-on-small-screen[_ngcontent-%COMP%]{display:none!important}@media (max-width: 860px){.user-dashboard-mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;color:#565d6f;font-weight:400}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start;height:250px}.g-table-header[_ngcontent-%COMP%]{display:none}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0;flex:0}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (min-width: 861px) and (max-width: 1199px){.user-dashboard-hide-on-medium-screen[_ngcontent-%COMP%]{display:none}.user-dashboard-seventh-row[_ngcontent-%COMP%]{width:calc((100% - 115px)/4)!important;border-bottom:1px solid rgba(0,0,0,.12)}}@media (max-width: 576px){.mat-column-type[_ngcontent-%COMP%]{width:100%}}@media (max-width: 370px){.visible-on-small-screen[_ngcontent-%COMP%]{display:none!important}.user-dashboard-visible-on-small-screen-370px[_ngcontent-%COMP%]{display:table-cell!important}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}"]}),a})();function Ke(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Name: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.scheduleName," ")}}function Xe(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Start Date: "),e.qZA(),e._uU(3),e.ALo(4,"DateDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.startDateTime)," ")}}function et(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Jobs: "),e.qZA(),e._uU(3),e.ALo(4,"DateDashboardTransformPipe"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",e.lcZ(4,1,t.endDateTime)," ")}}function tt(a,s){if(1&a&&(e.TgZ(0,"mat-cell",22)(1,"span",23),e._uU(2,"Job Slots: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.jobSlots," ")}}function at(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Assigned: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.assigned," ")}}function ot(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Unassigned: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.unAssigned," ")}}function st(a,s){if(1&a&&(e.TgZ(0,"mat-cell",24)(1,"span",23),e._uU(2,"Invalid: "),e.qZA(),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij("",t.invalid," ")}}function it(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-cell",25)(1,"button",26),e.NdJ("click",function(){const n=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewScheduleApprovalsDetails(n))}),e.TgZ(2,"p"),e._uU(3,"View Details"),e.qZA()()()}if(2&a){const t=s.$implicit;e.xp6(1),e.s9C("id",t.name)}}function nt(a,s){1&a&&e._UZ(0,"mat-row")}let rt=(()=>{class a{constructor(t,o){this._dashboardService=t,this._router=o,this.displayedColumns=["name","startDate","endDate","jobSlots","assigned","unassigned","invalid","actions"],this.data=new h.by,this.dataSource=new h.by,this._completed=new x.x,this.currentTab="",this.userDashboardScheduleApprovalsData=[]}ngOnInit(){this._dashboardService.getTabChangedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.currentTab=t,this.periodChanged(this._dashboardService.getCurrentPeriod())}),this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t))}periodChanged(t){"Schedule Approvals"==this.currentTab&&(this._periodInformation=t,this._dashboardService.getUserDashboardDataForScheduleApprovals(this._periodInformation.startDate.clone().format("MM-DD-YYYY"),this._periodInformation.endDate.clone().format("MM-DD-YYYY")).pipe((0,p.R)(this._completed)).subscribe(o=>{this.userDashboardScheduleApprovalsData=o,this.populateTableData()}))}populateTableData(){this.data=new h.by(this.userDashboardScheduleApprovalsData),this.startDate=d(this._periodInformation.startDate).format("YYYY-MM-DD"),this.endDate=d(this._periodInformation.endDate).format("YYYY-MM-DD")}viewScheduleApprovalsDetails(t){this._router.navigateByUrl("/scheduler",{state:{source:"approval-details",approvalDetailsFromDashboard:!0,scheduleID:t.scheduleId,requestId:t.id,subGroupId:t.subGroupId,startDate:t.startDateTime,endDate:t.endDateTime,isSchedule:t.isSchedule,currentView:t.currentView}})}getScreenSize(t){this.displayedColumns=t.target.innerWidth>860&&t.target.innerWidth<1200?["name","startDate","endDate","jobSlots","actions"]:["name","startDate","endDate","jobSlots","assigned","unassigned","invalid","actions"]}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.s),e.Y36(w.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-dashboard-schedule-approvals"]],hostBindings:function(t,o){1&t&&e.NdJ("resize",function(n){return o.getScreenSize(n)},!1,e.Jf7)},decls:49,vars:2,consts:[[1,"container-fluid"],[1,"row","g-user-dashboard-tab-container"],[1,"col-12"],[1,"row","g-table-header"],[1,"col-12","d-flex","flex-row"],[1,"user-dashboard-seventh-row"],[1,"user-dashboard-seventh-row","user-dashboard-hide-on-medium-screen"],["id","g-actions-column-width"],[1,"row"],[3,"dataSource"],["matColumnDef","name"],["class","user-dashboard-schedule-detail",4,"matCellDef"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","jobSlots"],["matColumnDef","assigned"],["class","user-dashboard-schedule-detail user-dashboard-hide-on-medium-screen",4,"matCellDef"],["matColumnDef","unassigned"],["matColumnDef","invalid"],["matColumnDef","actions"],["class","user-dashboard-visible-on-small-screen-370px",4,"matCellDef"],[4,"matRowDef","matRowDefColumns"],[1,"user-dashboard-schedule-detail"],[1,"user-dashboard-mobile-label"],[1,"user-dashboard-schedule-detail","user-dashboard-hide-on-medium-screen"],[1,"user-dashboard-visible-on-small-screen-370px"],[1,"btn","user-dashboard-details-button","pull-right","border-0",3,"id","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p"),e._uU(7,"Schedule/Subgroup"),e.qZA()(),e.TgZ(8,"div",5)(9,"p"),e._uU(10,"Start Date"),e.qZA()(),e.TgZ(11,"div",5)(12,"p"),e._uU(13,"End Date"),e.qZA()(),e.TgZ(14,"div",5)(15,"p"),e._uU(16,"Job Slots"),e.qZA()(),e.TgZ(17,"div",6)(18,"p"),e._uU(19,"Assigned"),e.qZA()(),e.TgZ(20,"div",6)(21,"p"),e._uU(22,"Unassigned"),e.qZA()(),e.TgZ(23,"div",6)(24,"p"),e._uU(25,"Invalid"),e.qZA()(),e.TgZ(26,"div",7)(27,"p"),e._uU(28,"Actions"),e.qZA()()()(),e.TgZ(29,"div",8)(30,"div",2)(31,"mat-table",9),e.ynx(32,10),e.YNc(33,Ke,4,1,"mat-cell",11),e.BQk(),e.ynx(34,12),e.YNc(35,Xe,5,3,"mat-cell",11),e.BQk(),e.ynx(36,13),e.YNc(37,et,5,3,"mat-cell",11),e.BQk(),e.ynx(38,14),e.YNc(39,tt,4,1,"mat-cell",11),e.BQk(),e.ynx(40,15),e.YNc(41,at,4,1,"mat-cell",16),e.BQk(),e.ynx(42,17),e.YNc(43,ot,4,1,"mat-cell",16),e.BQk(),e.ynx(44,18),e.YNc(45,st,4,1,"mat-cell",16),e.BQk(),e.ynx(46,19),e.YNc(47,it,4,1,"mat-cell",20),e.BQk(),e.YNc(48,nt,1,0,"mat-row",21),e.qZA()()()()()()),2&t&&(e.xp6(31),e.Q6J("dataSource",o.data),e.xp6(17),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[h.BZ,h.w1,h.Dz,h.nj,h.ev,h.Gk,q],styles:[".user-dashboard-seventh-row[_ngcontent-%COMP%]{width:calc((100% - 115px) / 7);border-bottom:1px solid rgba(0,0,0,.12)}mat-cell[_ngcontent-%COMP%]:first-of-type, mat-footer-cell[_ngcontent-%COMP%]:first-of-type, mat-header-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}mat-cell[_ngcontent-%COMP%]:last-of-type, mat-footer-cell[_ngcontent-%COMP%]:last-of-type, mat-header-cell[_ngcontent-%COMP%]:last-of-type{padding-right:5px}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0 0 115px;flex:0 0 115px}.user-dashboard-details-button[_ngcontent-%COMP%]{height:30px;width:110px;font-size:12px;font-weight:700;text-align:center;text-decoration:none;border:none;outline:none;color:#fff;background-color:var(--eSolve-primary);box-shadow:none}th[_ngcontent-%COMP%]{font-weight:600;font-size:12px;color:#42536f}.user-dashboard-schedule-detail[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f;width:100%}td.mat-column-type[_ngcontent-%COMP%]{font-weight:700;font-size:12px;color:#565d6f}.mat-column-type[_ngcontent-%COMP%]{position:relative;width:33.33%}.border-none[_ngcontent-%COMP%]{border:none}.user-dashboard-mobile-label[_ngcontent-%COMP%]{display:none}.visible-on-small-screen[_ngcontent-%COMP%]{display:none!important}@media (max-width: 860px){.user-dashboard-mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;color:#565d6f;font-weight:400}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:start;max-height:291px}.g-table-header[_ngcontent-%COMP%]{display:none}.mat-column-actions[_ngcontent-%COMP%]{-ms-flex:0;flex:0}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}@media (min-width: 861px) and (max-width: 1199px){.user-dashboard-hide-on-medium-screen[_ngcontent-%COMP%]{display:none}.user-dashboard-seventh-row[_ngcontent-%COMP%]{width:calc((100% - 115px)/4)!important;border-bottom:1px solid rgba(0,0,0,.12)}}@media (max-width: 576px){.mat-column-type[_ngcontent-%COMP%]{width:100%}}@media (max-width: 370px){.visible-on-small-screen[_ngcontent-%COMP%]{display:none!important}.user-dashboard-visible-on-small-screen-370px[_ngcontent-%COMP%]{display:table-cell!important}mat-footer-row[_ngcontent-%COMP%], mat-row[_ngcontent-%COMP%]{min-height:30px}}"]}),a})();const dt=["dashboardTabs"];function lt(a,s){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",4)(4,"div",7)(5,"span",8),e._uU(6,"Active Schedules"),e.qZA()(),e.TgZ(7,"div",7)(8,"span",9),e._uU(9),e.qZA()()(),e.TgZ(10,"div",4)(11,"div",7),e._UZ(12,"i",10),e.qZA()()()(),e.TgZ(13,"div",11)(14,"div",6)(15,"div",4)(16,"div",7)(17,"span",8),e._uU(18,"Schedule Hours"),e.qZA()(),e.TgZ(19,"div",7)(20,"span",9),e._uU(21),e.qZA()()(),e.TgZ(22,"div",4)(23,"div",7),e._UZ(24,"i",12),e.qZA()()()(),e.TgZ(25,"div",13)(26,"div",6)(27,"div",4)(28,"div",7)(29,"span",8),e._uU(30,"Schedule Job Slots"),e.qZA()(),e.TgZ(31,"div",7)(32,"span",9),e._uU(33),e.qZA()()(),e.TgZ(34,"div",4)(35,"div",7),e._UZ(36,"i",14),e.qZA()()()(),e.TgZ(37,"div",15)(38,"div",6)(39,"div",4)(40,"div",7)(41,"span",8),e._uU(42,"Assigned Jobs"),e.qZA()(),e.TgZ(43,"div",7)(44,"span",9),e._uU(45),e.qZA()()(),e.TgZ(46,"div",4)(47,"div",7),e._UZ(48,"i",16),e.qZA()()()()()),2&a){const t=e.oxw();e.xp6(9),e.hij(" ",t.dashboardData.activeSchedules," "),e.xp6(12),e.hij(" ",t.dashboardData.scheduleHours," "),e.xp6(12),e.hij(" ",t.dashboardData.scheduleJobSlots," "),e.xp6(12),e.hij(" ",t.dashboardData.assignedJobs," ")}}const ct=function(){return{display:!1}},ht=function(a){return{legend:a}},mt=function(a){return{plugins:a}};function pt(a,s){if(1&a&&(e.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",4)(4,"div",7)(5,"span",20),e._uU(6,"Required vs Scheduled Hours"),e.qZA()(),e._UZ(7,"div",7),e.TgZ(8,"div",7)(9,"div",21)(10,"div",22)(11,"div",23)(12,"div",24),e._UZ(13,"canvas",25),e.qZA()()()()()()()(),e.TgZ(14,"div",26)(15,"div",27)(16,"div",4)(17,"div",7)(18,"span",20),e._uU(19,"Schedule Problems"),e.qZA()(),e.TgZ(20,"div",7)(21,"div",28)(22,"div",29)(23,"div",24),e._UZ(24,"canvas",30),e.qZA()(),e.TgZ(25,"div",31)(26,"div",32)(27,"div",7)(28,"div",4)(29,"div",33)(30,"span",34),e._uU(31),e.qZA()(),e.TgZ(32,"div",7)(33,"span",35),e._uU(34),e.qZA(),e.TgZ(35,"span",20),e._uU(36,"Unassigned Jobs"),e.qZA()()()(),e.TgZ(37,"div",7),e._UZ(38,"hr",36),e.qZA(),e.TgZ(39,"div",7)(40,"div",4)(41,"div",33)(42,"span",37),e._uU(43),e.qZA()(),e.TgZ(44,"div",7)(45,"span",38),e._uU(46),e.qZA(),e.TgZ(47,"span",39),e._uU(48,"Invalid Assignments"),e.qZA()()()()()()()()()()()()),2&a){const t=e.oxw();e.xp6(13),e.Q6J("data",t.lineChartData)("labels",t.lineChartLabels)("options",t.lineChartOptions)("legend",t.lineChartLegend)("type",t.lineChartType),e.xp6(11),e.Q6J("datasets",t.doughnutChartData)("labels",t.doughnutChartLabels)("type",t.doughnutChartType)("options",e.VKq(16,mt,e.VKq(14,ht,e.DdM(13,ct)))),e.xp6(7),e.Oqu(t.dashboardData.unassignedJobs),e.xp6(3),e.Oqu(t.dashboardData.unassignedJobs),e.xp6(9),e.Oqu(t.dashboardData.invalidAssignments),e.xp6(3),e.Oqu(t.dashboardData.invalidAssignments)}}function ut(a,s){1&a&&(e.TgZ(0,"p",47),e._uU(1," Schedule Details "),e.qZA())}function bt(a,s){1&a&&(e.TgZ(0,"mat-tab",45),e.YNc(1,ut,2,0,"ng-template",46),e._UZ(2,"app-user-dashboard-schedule-details"),e.qZA())}function ft(a,s){if(1&a&&(e.TgZ(0,"p",47),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" Schedule Approvals (",t.dashboardData.scheduleApprovalsPending," pending) ")}}function gt(a,s){1&a&&(e.TgZ(0,"mat-tab",48),e.YNc(1,ft,2,1,"ng-template",46),e._UZ(2,"app-user-dashboard-schedule-approvals"),e.qZA())}function _t(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",7)(2,"div",40)(3,"mat-tab-group",41,42),e.NdJ("selectedTabChange",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.userDashboardTabChanged(i))}),e.YNc(5,bt,3,0,"mat-tab",43),e.YNc(6,gt,3,0,"mat-tab",44),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.canSeeScheduleDetails),e.xp6(1),e.Q6J("ngIf",t.dashboardData.isScheduleManager)}}let Dt=(()=>{class a{constructor(t){this._dashboardService=t,this.dashboardData=new He(0,"0",0,0,[0],[0],{},0,0,!1,!1,0,0),this.canSeeScheduleDetails=!1,this._completed=new x.x,this.currentTab="Schedule Details",this.lineChartLabels=[],this.lineChartOptions={responsive:!0,maintainAspectRatio:!1,scales:{x:{},y:{beginAtZero:!0,ticks:{callback:function(o,i,n){if(Math.floor(+o)===o)return o}}}},annotation:{annotations:[{}]},elements:{line:{tension:0}}},this.lineChartLegend=!1,this.lineChartType="line",this.doughnutChartLabels=["Unassigned Jobs","Invalid Assignments"],this.doughnutChartType="doughnut"}ngOnInit(){this._dashboardService.getPeriodChangeEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>this.periodChanged(t)),this.lineChartData={labels:["Scheduled Hours per day","Required Hours per day"],datasets:[{data:this.dashboardData.scheduledHours,label:"Scheduled Hours per day",fill:!0,backgroundColor:"rgba(148,159,177,0.2)",borderColor:"#1078CF",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{data:this.dashboardData.requiredHours,label:"Required Hours per day",fill:!0,backgroundColor:"rgba(77,83,96,0.2)",borderColor:"#eff3f7",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(77,83,96,1)"}]},this.lineChartLabels=["01"],this.doughnutChartData=[{data:[this.dashboardData.unassignedJobs,this.dashboardData.invalidAssignments],label:"Series A",backgroundColor:["#666679","#1078CF"],hoverBackgroundColor:["#555565","#0B77CE"],hoverBorderColor:["#ffffff","#ffffff"]}]}periodChanged(t){this.periodInformation=t,this.populateData()}populateData(){this._dashboardService.getUserDashboardData(this.periodInformation.startDate.clone().format("MM-DD-YYYY"),this.periodInformation.endDate.clone().format("MM-DD-YYYY")).pipe((0,p.R)(this._completed)).subscribe(t=>{if(this.updateTabsOnSchedulePermissionCheck(t.canSeeScheduleDetails),this.dashboardData=t,this.dashboardData.scheduleHours=this.convertTicksToTime(this.dashboardData.scheduleHours.toString()),this.lineChartLabels=[],d(this.periodInformation.startDate).isSame(d(this.periodInformation.endDate))){this.dashboardData.requiredHours=[],this.dashboardData.scheduledHours=[];for(const o in this.dashboardData.requiredVsScheduledHours)this.dashboardData.requiredHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyOne)),this.dashboardData.scheduledHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyTwo)),this.dashboardData.requiredHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyOne)),this.dashboardData.scheduledHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyTwo)),this.lineChartLabels.push(d(o).date().toString()),this.lineChartLabels.push(d(o).date().toString())}else{this.dashboardData.requiredHours=[],this.dashboardData.scheduledHours=[];for(const o in this.dashboardData.requiredVsScheduledHours)this.dashboardData.requiredHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyOne)),this.dashboardData.scheduledHours.push(this.convertTicksToHours(this.dashboardData.requiredVsScheduledHours[o].primaryKeyTwo)),this.lineChartLabels.push(d(o).date().toString())}this.lineChartData={labels:this.lineChartLabels,datasets:[{data:this.dashboardData.scheduledHours,label:"Scheduled Hours per day",fill:!0,backgroundColor:"rgba(148,159,177,0.2)",borderColor:"#1078CF",pointBackgroundColor:"rgba(148,159,177,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(148,159,177,0.8)"},{data:this.dashboardData.requiredHours,label:"Required Hours per day",fill:!0,backgroundColor:"rgba(77,83,96,0.2)",borderColor:"#eff3f7",pointBackgroundColor:"rgba(77,83,96,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(77,83,96,1)"}]},this.doughnutChartData=[{data:[this.dashboardData.unassignedJobs,this.dashboardData.invalidAssignments],label:"Series A",backgroundColor:["#666679","#1078CF"],hoverBackgroundColor:["#555565","#0B77CE"],hoverBorderColor:["#ffffff","#ffffff"]},{data:[0,0]}]})}convertTicksToTime(t){const o=Number(t)/1e4;let i=Math.trunc(d.duration(o).asHours()).toString(),n=d.duration(o).minutes().toString();return i=i.length<2?"0"+i:i,n=n.length<2?"0"+n:n,i+":"+n}convertTicksToHours(t){const o=Number(t)/1e4;let i=Math.trunc(d.duration(o).asHours());const n=d.duration(o).minutes();return(n>30||30==n&&i%2!=0)&&i++,i}userDashboardTabChanged(t){this.currentTab=t.tab.textLabel,this._dashboardService.emitTabChangedEvent(this.currentTab)}updateTabsOnSchedulePermissionCheck(t){let o=!1;this.canSeeScheduleDetails||(o=!0),this.canSeeScheduleDetails=t,o&&setTimeout(()=>{if(this.dashboardTabs){let i;this.dashboardTabs.selectedIndex=0,i=this.canSeeScheduleDetails?"Schedule Details":this.dashboardData.isScheduleManager?"Schedule Approvals":"",this._dashboardService.emitTabChangedEvent(i)}},10)}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(C.s))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-user-dashboard"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Z.jh,7),e.Gf(dt,5)),2&t){let i;e.iGM(i=e.CRH())&&(o.chart=i.first),e.iGM(i=e.CRH())&&(o.dashboardTabs=i.first)}},decls:5,vars:3,consts:[[1,"container-fluid"],[1,"g-thin-black-scroll-bar"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"row"],[1,"col-xl-3","col-sm-6","col-12","user-dashboard-active-schedules"],[1,"d-flex","justify-content-between","user-dashboard-card"],[1,"col-12"],[1,"user-dashboard-card-title"],[1,"user-dashboard-card-number"],["aria-hidden","true",1,"fa","fa-calendar"],[1,"col-xl-3","col-sm-6","col-12","user-dashboard-schedule-hours"],["aria-hidden","true",1,"fa","fa-clock-o"],[1,"col-xl-3","col-sm-6","col-12","user-dashboard-schedule-job-slots"],["aria-hidden","true",1,"fa","fa-suitcase"],[1,"col-xl-3","col-sm-6","col-12"],["aria-hidden","true",1,"fa","fa-male"],[1,"row","mt-3"],[1,"col-xl-6","col-12","user-dashboard-schedule-problem"],[1,"d-flex","justify-content-between","user-dashboard-card2"],[1,"font-12"],[1,"flex"],[1,"flex-item"],[1,"user-dashboard-scheduled-hours"],[1,"graph"],["baseChart","","height","350",1,"user-dashboard-canvas-scheduled-hours",3,"data","labels","options","legend","type"],[1,"col-xl-6","col-12"],[1,"user-dashboard-card2"],[1,"d-flex","justify-content-start"],[1,"user-dashboard-scheduled-problem"],["baseChart","","width","250","height","250",1,"user-dashboard-canvas-scheduled-problem",3,"datasets","labels","type","options"],[1,"d-flex","user-dashboard-schedule-problems"],[1,"row","justify-content-center","align-self-center"],[1,"col-12","user-dashboard-hide-on-large-screen"],[1,"user-dashboard-chart-legend-dark-blue"],[1,"user-dashboard-chart-legend-dark-blue","user-dashboard-hide-on-small-screen"],["id","user-dashboard-divider-between-schedule-problems",1,"float-left"],[1,"user-dashboard-chart-legend-blue"],[1,"user-dashboard-chart-legend-blue","user-dashboard-hide-on-small-screen"],[1,"font-12","blue-text"],[1,"user-dashboard-card3"],[1,"sys-pref-mat-group","g-dashboard-table-labels",3,"selectedTabChange"],["dashboardTabs",""],["label","Schedule Details",4,"ngIf"],["label","Schedule Approvals",4,"ngIf"],["label","Schedule Details"],["mat-tab-label",""],[1,"g-font-size-12"],["label","Schedule Approvals"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,lt,49,4,"div",2),e.YNc(3,pt,49,18,"div",3),e.YNc(4,_t,7,2,"div",3),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",o.canSeeScheduleDetails),e.xp6(1),e.Q6J("ngIf",o.canSeeScheduleDetails),e.xp6(1),e.Q6J("ngIf",o.canSeeScheduleDetails||o.dashboardData.isAbsenceManager||o.dashboardData.isScheduleManager))},dependencies:[D.O5,y.SP,y.uD,y.uX,Z.jh,We,rt],styles:[".g-thin-black-scroll-bar[_ngcontent-%COMP%]{height:calc(100vh - 133px);overflow-wrap:break-word;padding-right:5px}.font-12[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.user-dashboard-card[_ngcontent-%COMP%], .user-dashboard-card2[_ngcontent-%COMP%], .user-dashboard-card3[_ngcontent-%COMP%]{background-color:var(--eSolve-white);border:1px solid #A5A5B6;border-radius:10px;padding:6px 12px}.user-dashboard-card2[_ngcontent-%COMP%]{max-height:400px}.user-dashboard-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#666679;font-size:200%}.user-dashboard-card[_ngcontent-%COMP%]   .user-dashboard-card-title[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.user-dashboard-card[_ngcontent-%COMP%]   .user-dashboard-card-number[_ngcontent-%COMP%]{font-size:25px}.user-dashboard-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:15px}.user-dashboard-scheduled-hours[_ngcontent-%COMP%], .user-dashboard-scheduled-problem[_ngcontent-%COMP%]{display:block;max-height:250px!important}.user-dashboard-scheduled-problem[_ngcontent-%COMP%]{max-width:250px!important}.user-dashboard-scheduled-hours[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%], .user-dashboard-scheduled-problem[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%]{position:relative;height:100%!important;width:100%!important}.user-dashboard-scheduled-hours[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%]   .user-dashboard-canvas-scheduled-hours[_ngcontent-%COMP%]{width:100%!important;height:250px!important}.user-dashboard-chart-legend-blue[_ngcontent-%COMP%]{font-size:25px;color:var(--eSolve-primary);margin-right:15px;font-weight:700}.user-dashboard-chart-legend-dark-blue[_ngcontent-%COMP%]{font-size:25px;color:var(--eSolve-gray-dark);margin-right:15px;font-weight:700}#user-dashboard-divider-between-schedule-problems[_ngcontent-%COMP%]{width:50%}.user-dashboard-schedule-problems[_ngcontent-%COMP%]{max-width:160px;height:250px;margin-left:15px}.user-dashboard-hide-on-large-screen[_ngcontent-%COMP%]{display:none}.blue-text[_ngcontent-%COMP%]{color:var(--eSolve-primary)}@media (max-width: 453px){.g-thin-black-scroll-bar[_ngcontent-%COMP%]{height:calc(100vh - 161px);overflow-wrap:break-word;padding-right:5px}}@media (max-width: 1199px){.user-dashboard-active-schedules[_ngcontent-%COMP%], .user-dashboard-schedule-hours[_ngcontent-%COMP%], .user-dashboard-schedule-problem[_ngcontent-%COMP%]{margin-bottom:15px}}@media (max-width: 575px){.user-dashboard-schedule-job-slots[_ngcontent-%COMP%]{margin-bottom:15px}}@media (max-width: 530px){.user-dashboard-hide-on-large-screen[_ngcontent-%COMP%]{display:block}.user-dashboard-hide-on-small-screen[_ngcontent-%COMP%]{display:none}.user-dashboard-canvas-scheduled-problem[_ngcontent-%COMP%]{height:200px!important;width:143px!important}.user-dashboard-schedule-problems[_ngcontent-%COMP%]{height:200px}}@media (min-width: 531px){.user-dashboard-canvas-scheduled-problem[_ngcontent-%COMP%]{height:250px!important;width:250px!important}.user-dashboard-schedule-problems[_ngcontent-%COMP%]{height:250px}}"]}),a})();function vt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"mat-button-toggle",13),e.NdJ("change",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.changeDashboardView(i.value))}),e._uU(1,"Pay Period "),e.qZA()}}function Ct(a,s){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-user-dashboard"),e.qZA())}function xt(a,s){1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-employee-dashboard"),e.qZA())}const Tt=[{path:"",component:(()=>{class a{constructor(t,o,i,n,r,l,m,u,v,_,f,b){this.titleService=t,this.router=o,this.dashboardService=i,this.asyncValidator=n,this._userRoleService=r,this._datesService=l,this._dashboardService=m,this._messageService=u,this._profileService=v,this._zone=_,this.ref=f,this._authService=b,this.pageTitle="Dashboard",this.defaultView="resourceTimelineWeek",this.isAccountSwithed=!1,this.isPayPeriodExist=!1,this.payPeriodData=null,this.startDayOfWeekSetting=window.localStorage.getItem("startDayOfWeek")?window.localStorage.getItem("startDayOfWeek"):"Monday",this._completed=new x.x;const g=localStorage.getItem("isLoggedIn");o.events.subscribe(M=>{this.ref&&!this.ref.destroyed&&_.run(()=>this.ref.detectChanges())}),"true"!==g&&b.logout(!0)}ngOnInit(){this.titleService.sendTitle(this.pageTitle),this.getRole(),this.populateData(),this.subscription=this.dashboardService.getAccountSwitchedEmitter().pipe((0,p.R)(this._completed)).subscribe(t=>{this.isAccountSwithed=t,this.populateData()})}populateData(){this.getPayPeriod(),this.getLoggedUserID(),this.getData()}changeDashboardView(t){let o=d();if(o.set({hour:0,minute:0,second:0,millisecond:0}),this.defaultView=this.isPayPeriodExist||"resourceTimelinePayPeriod"!=t?t:"resourceTimelineWeek","resourceTimelineWeek"==this.defaultView)this.startDate=this._datesService.getStartDateOfWeek(o),this.endDate=this._datesService.getEndDateOfWeek(o),this.monthLabels=this.startDate.format("DD MMM YYYY")+" - "+this.endDate.format("DD MMM YYYY");else if("resourceTimelineDay"==this.defaultView)this.startDate=o,this.endDate=o,this.monthLabels=this.startDate.format("DD MMM YYYY");else if("resourceTimelinePayPeriod"==this.defaultView){let i=d(this.payPeriodData.payPeriodStartDate),n=i.clone();if(this.payPeriodData.isMonthlyPayPeriod){const l=d(this.payPeriodData.payPeriodStartDate).daysInMonth();n=d(i).add(l-1,"days")}else n=d(n).add(this.payPeriodData.payPeriodNumberOfDays-1,"days");let r=d(o).isBetween(i,n)||d(o).isSame(i)||d(o).isSame(n);for(;!r&&!o.isBefore(i);){if(this.payPeriodData.isMonthlyPayPeriod){i=d(i).add(1,"month");const l=d(i).daysInMonth();n=d(i).add(l-1,"days")}else i=d(i).add(this.payPeriodData.payPeriodNumberOfDays,"days"),n=d(n).add(this.payPeriodData.payPeriodNumberOfDays,"days");r=d(o).isBetween(i,n)||d(o).isSame(i)||d(o).isSame(n)}this.startDate=i,this.endDate=n,this.monthLabels=i.format("DD MMM YYYY")+" - "+n.format("DD MMM YYYY")}this.periodInformation={startDate:this.startDate,endDate:this.endDate,loggedUserID:this.loggedUserID,isAccountSwitched:this.isAccountSwithed,defaultView:this.defaultView},this._dashboardService.emitPeriodChangeEvent(this.periodInformation)}showPreviousDate(){if("resourceTimelineWeek"==this.defaultView)this.startDate=d(this.startDate).add(-1,"week"),this.endDate=d(this.endDate).add(-1,"week"),this.monthLabels=this.startDate.format("DD MMM YYYY")+" - "+this.endDate.format("DD MMM YYYY");else if("resourceTimelineDay"==this.defaultView)this.startDate=d(this.startDate).add(-1,"days"),this.endDate=d(this.endDate).add(-1,"days"),this.monthLabels=this.startDate.format("DD MMM YYYY");else if("resourceTimelinePayPeriod"==this.defaultView){if(this.payPeriodData.isMonthlyPayPeriod){this.startDate=d(this.startDate).add(-1,"month");const t=d(this.startDate).daysInMonth();this.endDate=d(this.startDate).add(t-1,"days")}else this.startDate=d(this.startDate).add(-this.payPeriodData.payPeriodNumberOfDays,"days"),this.endDate=d(this.endDate).add(-this.payPeriodData.payPeriodNumberOfDays,"days");this.monthLabels=this.startDate.format("DD MMM YYYY")+" - "+this.endDate.format("DD MMM YYYY")}this.periodInformation={startDate:this.startDate,endDate:this.endDate,loggedUserID:this.loggedUserID,isAccountSwitched:this.isAccountSwithed,defaultView:this.defaultView},this._dashboardService.emitPeriodChangeEvent(this.periodInformation)}showNextDate(){if("resourceTimelineWeek"==this.defaultView)this.startDate=d(this.startDate).add(1,"week"),this.endDate=d(this.endDate).add(1,"week"),this.monthLabels=this.startDate.format("DD MMM YYYY")+" - "+this.endDate.format("DD MMM YYYY");else if("resourceTimelineDay"==this.defaultView)this.startDate=d(this.startDate).add(1,"days"),this.endDate=d(this.endDate).add(1,"days"),this.monthLabels=this.startDate.format("DD MMM YYYY");else if("resourceTimelinePayPeriod"==this.defaultView){if(this.payPeriodData.isMonthlyPayPeriod){this.startDate=d(this.startDate).add(1,"month");const t=d(this.startDate).daysInMonth();this.endDate=d(this.startDate).add(t-1,"days")}else this.startDate=d(this.startDate).add(this.payPeriodData.payPeriodNumberOfDays,"days"),this.endDate=d(this.endDate).add(this.payPeriodData.payPeriodNumberOfDays,"days");this.monthLabels=this.startDate.format("DD MMM YYYY")+" - "+this.endDate.format("DD MMM YYYY")}this.periodInformation={startDate:this.startDate,endDate:this.endDate,loggedUserID:this.loggedUserID,isAccountSwitched:this.isAccountSwithed,defaultView:this.defaultView},this._dashboardService.emitPeriodChangeEvent(this.periodInformation)}getPayPeriod(){this._datesService.getDate().pipe((0,p.R)(this._completed)).subscribe(t=>{if(t.isMonthlyPayPeriod||t.payPeriodNumberOfDays?(this.isPayPeriodExist=!0,this.payPeriodData=t):this.isPayPeriodExist=!1,t.scheduleInitialDateRange)switch(t.scheduleInitialDateRange){case"Day":this.changeDashboardView("resourceTimelineDay");break;case"payPeriod":this.changeDashboardView("resourceTimelinePayPeriod");break;default:this.changeDashboardView("resourceTimelineWeek")}else this.changeDashboardView("resourceTimelineWeek")},t=>{this._messageService.open(t)})}getRole(){this._userRoleService.loggedUserRole.subscribe(t=>{this.role=t})}getLoggedUserID(){this._userRoleService.loggedUserId.subscribe(t=>{this.loggedUserID=t})}getData(){this.dashboardService.getData().pipe((0,p.R)(this._completed)).subscribe(t=>{this.asyncValidator.getDatePreferences()})}ngOnDestroy(){this._completed.next(!0),this._completed.complete()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(z.Z),e.Y36(w.F0),e.Y36(C.s),e.Y36(R.x),e.Y36(j.J),e.Y36(Q.X),e.Y36(C.s),e.Y36(S.G),e.Y36(U.H),e.Y36(e.R0b),e.Y36(e.sBO),e.Y36(L.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard"]],decls:22,vars:6,consts:[[1,"container-div"],[1,"container-fluid","h-100","dashboard-container"],[1,"row","eSolve-datepicker-card","eSolve-calendar-background-light"],[1,"col-12"],[1,"bold-text","esolve-month-label","margin-left-15"],[1,"eSolve-view-navigation","margin-left-15",3,"value"],["value","resourceTimelineDay",1,"eSolve-view-navigation",3,"change"],["value","resourceTimelineWeek",1,"eSolve-view-navigation",3,"change"],["class","eSolve-view-navigation","value","resourceTimelinePayPeriod",3,"change",4,"ngIf"],["mat-icon-button","","mat-stroked-button","",1,"eSolve-next-prev",3,"click"],["aria-hidden","false"],[1,"row","eSolve-datepicker-card"],[4,"ngIf"],["value","resourceTimelinePayPeriod",1,"eSolve-view-navigation",3,"change"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.qZA(),e.TgZ(6,"mat-button-toggle-group",5)(7,"mat-button-toggle",6),e.NdJ("change",function(n){return o.changeDashboardView(n.value)}),e._uU(8,"Day "),e.qZA(),e.TgZ(9,"mat-button-toggle",7),e.NdJ("change",function(n){return o.changeDashboardView(n.value)}),e._uU(10,"Week "),e.qZA(),e.YNc(11,vt,2,0,"mat-button-toggle",8),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return o.showPreviousDate()}),e.TgZ(13,"mat-icon"),e._uU(14,"chevron_left"),e.qZA()(),e.TgZ(15,"button",9),e.NdJ("click",function(){return o.showNextDate()}),e.TgZ(16,"mat-icon",10),e._uU(17,"chevron_right"),e.qZA()()()(),e.TgZ(18,"div",11)(19,"div",3),e.YNc(20,Ct,2,0,"div",12),e.YNc(21,xt,2,0,"div",12),e.qZA()()()()),2&t&&(e.Q6J("@routerTransition",void 0),e.xp6(5),e.Oqu(o.monthLabels),e.xp6(1),e.Q6J("value",o.defaultView),e.xp6(5),e.Q6J("ngIf",o.isPayPeriodExist),e.xp6(9),e.Q6J("ngIf","User"==o.role&&!o.isAccountSwithed),e.xp6(1),e.Q6J("ngIf","Employee"==o.role||o.isAccountSwithed))},dependencies:[D.O5,V.lW,F.Hw,Y.A9,Y.Yi,Je,Dt],styles:[".container-div[_ngcontent-%COMP%]{padding:0 15px}.dashboard-container[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.dashboard-container[_ngcontent-%COMP%]   .eSolve-calendar-background-light[_ngcontent-%COMP%]{background-color:#e0e0e7!important}.welcome-placeholder[_ngcontent-%COMP%]{height:85vh}.welcome-message[_ngcontent-%COMP%]{color:var(--eSolve-gray-dark);margin-bottom:35px}.logo-image[_ngcontent-%COMP%]{max-width:70vw;height:auto}.eSolve-view-navigation[_ngcontent-%COMP%]{background-color:inherit;border-color:var(--eSolve-primary)}.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:var(--eSolve-primary);color:#fff}.eSolve-next-prev[_ngcontent-%COMP%]{height:30px!important;line-height:25px;width:30px;border:none}.esolve-month-label[_ngcontent-%COMP%]{white-space:nowrap;font-size:15px;width:200px}.margin-left-15[_ngcontent-%COMP%]{margin-left:15px}.eSolve-datepicker-card[_ngcontent-%COMP%]{padding:10px 15px;background-color:#eff3f7}"],data:{animation:[(0,B.Z9)()]}}),a})()}];let yt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[w.Bz.forChild(Tt),w.Bz]}),a})();var wt=c(99675),St=c(95369),J=c(1130),Mt=c(77074);const H={parse:{dateInput:[T.YG]},display:{dateInput:T.YG,monthYearLabel:T.DQ}};let Pt=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[{provide:J._A,useClass:Mt.e},{provide:J.sG,useValue:H}],imports:[D.ez,A.mH,A._A,yt,wt.os,St.q,Z.vQ]}),a})()}}]);
//# sourceMappingURL=882.31c0e58b66a3e8f0.js.map